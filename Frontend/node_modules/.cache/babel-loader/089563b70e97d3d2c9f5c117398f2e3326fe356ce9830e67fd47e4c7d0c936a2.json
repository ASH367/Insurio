{"ast":null,"code":"var _jsxFileName = \"/Users/ashishubale/Desktop/Projects/Insurio/insurio-app/src/Components/Middle.js\",\n  _s = $RefreshSig$();\nimport React, { useState, useRef, useEffect } from 'react';\nimport { ArrowUpIcon, Microphone, Paperclip } from \"@phosphor-icons/react\";\nimport Frame5 from \"../Images/Frame5.png\";\nimport axios from \"axios\";\nimport ReactMarkdown from 'react-markdown';\nimport remarkGfm from \"remark-gfm\";\nimport { AnimatePresence, motion } from 'framer-motion';\nimport FeaturePopup from \"./FeaturePopup\";\nimport { getOrCreateSessionId } from \"./session\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst Middle = ({\n  formData,\n  sessionId\n}) => {\n  _s();\n  const [selected, setSelected] = useState(\"Search\");\n  const options = ['Search', 'Recommend', 'Compare'];\n  const [message, setMessage] = useState(\"\");\n  const [loading, setLoading] = useState(false);\n  const [response, setResponse] = useState(\"\");\n  const [chatHistory, setChatHistory] = useState([]);\n  const [inputFocused, setInputFocused] = useState(false);\n  const [isGeneratingRecommendation, setIsGeneratingRecommendation] = useState(false);\n  const [systemContext, setSystemContext] = useState([]);\n  const inputRef = useRef(null);\n  const [showPopup, setShowPopup] = useState(false);\n  useEffect(() => {\n    const history = getChatHistory();\n    setMessages(history); // Load on first render\n  }, []);\n  function saveMessageToHistory(message) {\n    const sessionId = getOrCreateSessionId();\n    const historyKey = `chat-history-${sessionId}`;\n    const existing = JSON.parse(localStorage.getItem(historyKey)) || [];\n    existing.push(message);\n    localStorage.setItem(historyKey, JSON.stringify(existing));\n  }\n  function getChatHistory() {\n    const sessionId = getOrCreateSessionId();\n    const historyKey = `chat-history-${sessionId}`;\n    return JSON.parse(localStorage.getItem(historyKey)) || [];\n  }\n  function handleNewMessage(role, content) {\n    const newMessage = {\n      role,\n      content,\n      timestamp: new Date().toISOString()\n    };\n    setMessages(prev => {\n      const updated = [...prev, newMessage];\n      saveMessageToHistory(newMessage);\n      return updated;\n    });\n  }\n  const handleClick = () => {\n    setShowPopup(true);\n    // optionally: onReset(); if you want both behaviors\n  };\n  const handleRecommendationClick = async () => {\n    setIsGeneratingRecommendation(true);\n    try {\n      // Add user message to chat\n      setChatHistory(prev => [...prev, {\n        sender: \"user\",\n        text: \"Show me personalized recommendations\"\n      }, {\n        sender: \"bot\",\n        text: \"Analyzing your profile...\"\n      }]);\n\n      // Prepare payload with hardcoded values\n      const payload = {\n        income: 100000,\n        age: parseInt(formData.age, 10),\n        gender: formData.gender,\n        uses_tobacco: formData.useOfTobaco === 'Daily user',\n        zipcode: formData.zip,\n        state: formData.state.toUpperCase(),\n        year: 2025,\n        countyfips: \"04013\",\n        sessionId: sessionId\n      };\n\n      // Directly call marketplace API for recommendations\n      const response = await axios.post(\"http://localhost:8000/marketplace-plans\",\n      // \"https://insurance-backend-yuoj.onrender.com/marketplace-plans\",\n      payload);\n\n      // Format the API response\n      const {\n        available,\n        recommendation,\n        message,\n        link\n      } = response.data;\n      let finalRecommendation;\n      if (available === false && link) {\n        // Case: State not supported, show message + link\n        finalRecommendation = `${message}\\n\\nExplore plans at: ${link}`;\n      } else {\n        // Case: AI-generated recommendation exists\n        finalRecommendation = recommendation || \"No recommendations available at this time.\";\n      }\n      const formattedRecommendation = /*#__PURE__*/_jsxDEV(ReactMarkdown, {\n        remarkPlugins: [remarkGfm],\n        children: finalRecommendation\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 103,\n        columnNumber: 39\n      }, this);\n      setSystemContext(response.data.context || []);\n      setChatHistory(prev => [...prev.slice(0, -1), {\n        sender: \"bot\",\n        text: formattedRecommendation,\n        raw: recommendation\n      }]);\n    } catch (error) {\n      setChatHistory(prev => [...prev.slice(0, -1), {\n        sender: \"bot\",\n        text: \"Failed to load recommendations. Please try again later.\"\n      }]);\n    } finally {\n      setIsGeneratingRecommendation(false);\n    }\n  };\n  const handleSend = async () => {\n    if (!message.trim()) return;\n    const userMessage = message;\n    setLoading(true);\n\n    // Create updated history before state update\n    const updatedHistory = [...chatHistory, {\n      sender: \"user\",\n      text: userMessage,\n      raw: userMessage\n    }];\n    setChatHistory(updatedHistory);\n    setMessage(\"\");\n    setInputFocused(false);\n    try {\n      // Prepare chat context - dynamically adjust based on message length\n      const chatContext = [];\n      let lastRole = null;\n      updatedHistory.slice(-5) // Fixed context window\n      .forEach(msg => {\n        const role = msg.sender === \"user\" ? \"user\" : \"assistant\";\n        if (role !== lastRole) {\n          var _msg$text, _msg$text$props, _msg$text$props$child;\n          chatContext.push({\n            role,\n            content: msg.raw || (\n            // Use raw text when available\n            typeof msg.text === 'string' ? msg.text : ((_msg$text = msg.text) === null || _msg$text === void 0 ? void 0 : (_msg$text$props = _msg$text.props) === null || _msg$text$props === void 0 ? void 0 : (_msg$text$props$child = _msg$text$props.children) === null || _msg$text$props$child === void 0 ? void 0 : _msg$text$props$child[0]) || '')\n          });\n          lastRole = role;\n        }\n      });\n      if (chatContext.length > 0 && chatContext[chatContext.length - 1].role === \"user\") {\n        chatContext.pop();\n      }\n      const payload = {\n        message: userMessage,\n        context: chatContext,\n        userData: {\n          firstName: formData.firstName,\n          lastName: formData.lastName,\n          age: parseInt(formData.age, 10) || null,\n          gender: formData.gender,\n          uses_tobacco: formData.useOfTobaco === 'Daily user',\n          zipcode: formData.zip,\n          state: formData.state.toUpperCase()\n        },\n        sessionId: sessionId\n      };\n      const res = await axios.post(\n      //\"https://insurance-backend-yuoj.onrender.com/chat-with-ai\",\n      \"http://localhost:8000/chat-with-ai\", payload);\n      const botReply = res.data.reply || \"No response received.\";\n      setChatHistory(prev => [...prev, {\n        sender: \"bot\",\n        text: /*#__PURE__*/_jsxDEV(ReactMarkdown, {\n          remarkPlugins: [remarkGfm],\n          children: botReply\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 187,\n          columnNumber: 17\n        }, this),\n        raw: botReply // Store raw text for future context\n      }]);\n\n      // Update with both user message and bot response\n    } catch (error) {\n      var _error$response, _error$response$data, _error$response$data$;\n      const errorMsg = ((_error$response = error.response) === null || _error$response === void 0 ? void 0 : (_error$response$data = _error$response.data) === null || _error$response$data === void 0 ? void 0 : (_error$response$data$ = _error$response$data.error) === null || _error$response$data$ === void 0 ? void 0 : _error$response$data$.message) || \"Something went wrong. Please try again.\";\n      setChatHistory(prev => [...prev, {\n        sender: \"bot\",\n        text: errorMsg\n      }]);\n      setResponse(errorMsg);\n    } finally {\n      setLoading(false);\n    }\n  };\n  const handleKeyDown = e => {\n    if (e.key === \"Enter\") {\n      handleSend();\n    }\n  };\n  const handleOptionClick = option => {\n    setSelected(option);\n    if (option === \"Recommend\") {\n      handleRecommendationClick();\n    }\n    if (option === \"Compare\") {\n      handleClick();\n    }\n  };\n  const shouldShowWelcome = !inputFocused && chatHistory.length === 0 && !message.trim();\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    style: {\n      borderRadius: \"12px\",\n      boxShadow: \"0px 4px 8px rgba(0, 0, 0, 0.1)\",\n      backgroundColor: \"#FAFAFA\",\n      height: \"96vh\",\n      width: \"100%\",\n      backdropFilter: \"blur(32px)\",\n      marginTop: \"20px\",\n      marginBottom: \"20px\",\n      position: \"relative\",\n      overflow: \"hidden\"\n    },\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      style: {\n        display: \"flex\",\n        marginTop: \"30px\",\n        justifyContent: \"center\"\n      },\n      children: [/*#__PURE__*/_jsxDEV(\"img\", {\n        src: Frame5,\n        style: {\n          width: '18px',\n          height: '18px',\n          marginTop: \"2.5px\"\n        },\n        alt: \"Logo\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 239,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        style: {\n          fontSize: \"18px\",\n          marginLeft: \"6px\"\n        },\n        children: \"Insurio\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 240,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 238,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      style: {\n        maxHeight: \"65vh\",\n        overflowY: \"auto\",\n        padding: \"0 24px\",\n        marginTop: \"20px\"\n      },\n      children: [/*#__PURE__*/_jsxDEV(AnimatePresence, {\n        children: shouldShowWelcome && /*#__PURE__*/_jsxDEV(motion.div, {\n          initial: {\n            opacity: 0,\n            y: -40\n          },\n          animate: {\n            opacity: 1,\n            y: 0\n          },\n          exit: {\n            opacity: 0,\n            y: -40\n          },\n          transition: {\n            duration: 0.4,\n            ease: \"easeInOut\"\n          },\n          style: {\n            display: \"flex\",\n            justifyContent: \"center\",\n            alignItems: \"center\",\n            flexDirection: \"column\",\n            marginTop: \"100px\"\n          },\n          children: [/*#__PURE__*/_jsxDEV(\"img\", {\n            src: Frame5,\n            style: {\n              width: '22px',\n              height: '22px'\n            },\n            alt: \"icon\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 267,\n            columnNumber: 7\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            style: {\n              color: \"#A0A0A0\",\n              fontSize: \"16px\",\n              marginTop: \"8px\"\n            },\n            children: [\"Welcome to Insurio \", formData.firstName]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 268,\n            columnNumber: 7\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            style: {\n              color: \"#000000\",\n              fontSize: \"38px\",\n              marginTop: \"8px\"\n            },\n            children: \"How can I Help ?\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 269,\n            columnNumber: 7\n          }, this), loading && /*#__PURE__*/_jsxDEV(\"div\", {\n            style: {\n              marginTop: \"20px\",\n              color: \"#A0A0A0\"\n            },\n            children: \"Thinking...\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 270,\n            columnNumber: 19\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 254,\n          columnNumber: 5\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 252,\n        columnNumber: 9\n      }, this), chatHistory.map((msg, index) => /*#__PURE__*/_jsxDEV(\"div\", {\n        style: {\n          textAlign: msg.sender === \"user\" ? \"right\" : \"left\",\n          margin: \"12px 0\"\n        },\n        children: /*#__PURE__*/_jsxDEV(\"span\", {\n          style: {\n            display: \"inline-block\",\n            backgroundColor: msg.sender === \"user\" ? \"#DCF8C6\" : \"#FFFFFF\",\n            color: \"#000000\",\n            padding: \"10px 14px\",\n            borderRadius: \"16px\",\n            maxWidth: \"60%\",\n            fontSize: \"15px\",\n            boxShadow: \"0 2px 4px rgba(0,0,0,0.1)\"\n          },\n          children: msg.text\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 285,\n          columnNumber: 13\n        }, this)\n      }, index, false, {\n        fileName: _jsxFileName,\n        lineNumber: 278,\n        columnNumber: 11\n      }, this))]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 244,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      style: {\n        paddingLeft: \"12px\",\n        paddingRight: \"12px\",\n        backgroundColor: \"#F0F0F0\",\n        borderRadius: \"12px\",\n        position: \"fixed\",\n        bottom: \"6%\",\n        left: \"50%\",\n        transform: \"translateX(-50%)\",\n        width: \"40%\",\n        border: \"1px solid #E0E0E0\"\n      },\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        style: {\n          display: \"flex\",\n          marginBottom: 0,\n          marginTop: \"14px\"\n        },\n        children: [/*#__PURE__*/_jsxDEV(\"input\", {\n          ref: inputRef,\n          type: \"text\",\n          value: message,\n          onChange: e => setMessage(e.target.value),\n          onFocus: () => setInputFocused(true),\n          onBlur: () => setTimeout(() => setInputFocused(false), 100),\n          onKeyDown: handleKeyDown,\n          placeholder: \"Ask about any coverage\",\n          style: {\n            flex: 1,\n            borderRadius: \"8px\",\n            backgroundColor: \"#f0f0f0\",\n            marginRight: \"10px\",\n            border: \"none\",\n            fontSize: \"16px\",\n            color: \"#000000\",\n            transition: \"background 0.3s\",\n            outline: \"none\"\n          }\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 319,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          onClick: handleSend,\n          style: {\n            width: \"26px\",\n            height: \"26px\",\n            borderRadius: \"100px\",\n            background: \"#000000\",\n            color: \"#A0A0A0\",\n            border: \"none\",\n            cursor: \"pointer\",\n            display: \"flex\",\n            alignItems: \"center\",\n            justifyContent: \"center\"\n          },\n          children: /*#__PURE__*/_jsxDEV(ArrowUpIcon, {\n            size: 20,\n            color: \"#FFF\",\n            weight: \"bold\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 355,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 340,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 318,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        style: {\n          display: \"flex\",\n          gap: \"8px\",\n          justifyContent: \"space-between\"\n        },\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          style: {\n            display: \"flex\",\n            gap: \"8px\",\n            justifyContent: \"flex-start\"\n          },\n          children: options.map(label => {\n            const isSelected = selected === label;\n            return /*#__PURE__*/_jsxDEV(\"p\", {\n              onClick: () => handleOptionClick(label),\n              style: {\n                border: \"1px solid\",\n                borderColor: isSelected ? \"#ECB26B3D\" : \"#E0E0E0\",\n                marginBottom: \"12px\",\n                marginTop: \"21px\",\n                textAlign: \"center\",\n                padding: \"10px 16px\",\n                color: isSelected ? \"#ECB26B\" : \"#A0A0A0\",\n                borderRadius: \"10px\",\n                backgroundColor: isSelected ? \"rgba(236, 178, 107, 0.24)\" : \"#FAFAFA\",\n                cursor: isGeneratingRecommendation ? 'not-allowed' : 'pointer',\n                opacity: isGeneratingRecommendation ? 0.6 : 1,\n                display: \"flex\",\n                alignItems: \"center\",\n                cursor: \"pointer\",\n                transition: \"all 0.3s\",\n                userSelect: \"none\",\n                fontSize: \"16px\"\n              },\n              disabled: isGeneratingRecommendation,\n              children: label\n            }, label, false, {\n              fileName: _jsxFileName,\n              lineNumber: 365,\n              columnNumber: 17\n            }, this);\n          })\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 361,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          style: {\n            display: \"flex\",\n            gap: \"8px\",\n            justifyContent: \"flex-start\"\n          },\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            style: {\n              display: \"flex\",\n              alignItems: \"center\",\n              marginTop: \"21px\",\n              padding: \"10px 0\",\n              marginBottom: \"12px\",\n              cursor: \"pointer\"\n            },\n            onClick: handleClick,\n            children: /*#__PURE__*/_jsxDEV(Microphone, {\n              size: 20,\n              color: \"#A0A0A0\",\n              weight: \"fill\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 396,\n              columnNumber: 15\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 395,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            style: {\n              display: \"flex\",\n              alignItems: \"center\",\n              marginTop: \"21px\",\n              padding: \"10px 0\",\n              marginBottom: \"12px\",\n              cursor: \"pointer\"\n            },\n            onClick: handleClick,\n            children: /*#__PURE__*/_jsxDEV(Paperclip, {\n              size: 20,\n              color: \"#A0A0A0\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 399,\n              columnNumber: 15\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 398,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 394,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 360,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 304,\n      columnNumber: 7\n    }, this), showPopup && /*#__PURE__*/_jsxDEV(FeaturePopup, {\n      onClose: () => setShowPopup(false)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 404,\n      columnNumber: 21\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 223,\n    columnNumber: 5\n  }, this);\n};\n_s(Middle, \"bD9GfFQUSh1RD5OBSJuwvn8xNfQ=\");\n_c = Middle;\nexport default Middle;\nvar _c;\n$RefreshReg$(_c, \"Middle\");","map":{"version":3,"names":["React","useState","useRef","useEffect","ArrowUpIcon","Microphone","Paperclip","Frame5","axios","ReactMarkdown","remarkGfm","AnimatePresence","motion","FeaturePopup","getOrCreateSessionId","jsxDEV","_jsxDEV","Middle","formData","sessionId","_s","selected","setSelected","options","message","setMessage","loading","setLoading","response","setResponse","chatHistory","setChatHistory","inputFocused","setInputFocused","isGeneratingRecommendation","setIsGeneratingRecommendation","systemContext","setSystemContext","inputRef","showPopup","setShowPopup","history","getChatHistory","setMessages","saveMessageToHistory","historyKey","existing","JSON","parse","localStorage","getItem","push","setItem","stringify","handleNewMessage","role","content","newMessage","timestamp","Date","toISOString","prev","updated","handleClick","handleRecommendationClick","sender","text","payload","income","age","parseInt","gender","uses_tobacco","useOfTobaco","zipcode","zip","state","toUpperCase","year","countyfips","post","available","recommendation","link","data","finalRecommendation","formattedRecommendation","remarkPlugins","children","fileName","_jsxFileName","lineNumber","columnNumber","context","slice","raw","error","handleSend","trim","userMessage","updatedHistory","chatContext","lastRole","forEach","msg","_msg$text","_msg$text$props","_msg$text$props$child","props","length","pop","userData","firstName","lastName","res","botReply","reply","_error$response","_error$response$data","_error$response$data$","errorMsg","handleKeyDown","e","key","handleOptionClick","option","shouldShowWelcome","style","borderRadius","boxShadow","backgroundColor","height","width","backdropFilter","marginTop","marginBottom","position","overflow","display","justifyContent","src","alt","fontSize","marginLeft","maxHeight","overflowY","padding","div","initial","opacity","y","animate","exit","transition","duration","ease","alignItems","flexDirection","color","map","index","textAlign","margin","maxWidth","paddingLeft","paddingRight","bottom","left","transform","border","ref","type","value","onChange","target","onFocus","onBlur","setTimeout","onKeyDown","placeholder","flex","marginRight","outline","onClick","background","cursor","size","weight","gap","label","isSelected","borderColor","userSelect","disabled","onClose","_c","$RefreshReg$"],"sources":["/Users/ashishubale/Desktop/Projects/Insurio/insurio-app/src/Components/Middle.js"],"sourcesContent":["import React, { useState, useRef, useEffect} from 'react';\nimport { ArrowUpIcon, Microphone, Paperclip } from \"@phosphor-icons/react\";\nimport Frame5 from \"../Images/Frame5.png\";\nimport axios from \"axios\";\nimport ReactMarkdown from 'react-markdown';\nimport remarkGfm from \"remark-gfm\";\nimport { AnimatePresence, motion } from 'framer-motion';\nimport FeaturePopup from \"./FeaturePopup\";\nimport { getOrCreateSessionId } from \"./session\";\n\nconst Middle = ({formData, sessionId}) => {\n\n  const [selected, setSelected] = useState(\"Search\");\n  const options = ['Search', 'Recommend', 'Compare'];\n  const [message, setMessage] = useState(\"\");\n  const [loading, setLoading] = useState(false);\n  const [response, setResponse] = useState(\"\");\n  const [chatHistory, setChatHistory] = useState([]);\n  const [inputFocused, setInputFocused] = useState(false);\n  const [isGeneratingRecommendation, setIsGeneratingRecommendation] = useState(false);\n  const [systemContext, setSystemContext] = useState([]);\n  \n\n  const inputRef = useRef(null);\n  const [showPopup, setShowPopup] = useState(false);\n\n  useEffect(() => {\n    const history = getChatHistory();\n    setMessages(history); // Load on first render\n  }, []);\n\n\n  function saveMessageToHistory(message) {\n    const sessionId = getOrCreateSessionId();\n    const historyKey = `chat-history-${sessionId}`;\n    const existing = JSON.parse(localStorage.getItem(historyKey)) || [];\n    existing.push(message);\n    localStorage.setItem(historyKey, JSON.stringify(existing));\n  }\n  \n  function getChatHistory() {\n    const sessionId = getOrCreateSessionId();\n    const historyKey = `chat-history-${sessionId}`;\n    return JSON.parse(localStorage.getItem(historyKey)) || [];\n  }\n\n  function handleNewMessage(role, content) {\n    const newMessage = { role, content, timestamp: new Date().toISOString() };\n    setMessages(prev => {\n      const updated = [...prev, newMessage];\n      saveMessageToHistory(newMessage);\n      return updated;\n    });\n  }\n\n  const handleClick = () => {\n    setShowPopup(true);\n    // optionally: onReset(); if you want both behaviors\n  }; \n\n  const handleRecommendationClick = async () => {\n    setIsGeneratingRecommendation(true);\n    try {\n      // Add user message to chat\n      setChatHistory(prev => [\n        ...prev,\n        { sender: \"user\", text: \"Show me personalized recommendations\" },\n        { sender: \"bot\", text: \"Analyzing your profile...\" }\n      ]);\n\n      // Prepare payload with hardcoded values\n      const payload = {\n        income: 100000,\n        age: parseInt(formData.age,10),\n        gender: formData.gender,\n        uses_tobacco: formData.useOfTobaco === 'Daily user',\n        zipcode: formData.zip,\n        state: formData.state.toUpperCase(),\n        year: 2025,\n        countyfips: \"04013\",\n        sessionId: sessionId\n      };\n\n      // Directly call marketplace API for recommendations\n      const response = await axios.post(\n        \"http://localhost:8000/marketplace-plans\",\n        // \"https://insurance-backend-yuoj.onrender.com/marketplace-plans\",\n        payload\n      );\n\n      // Format the API response\n      const { available, recommendation, message, link} = response.data;\n\n      let finalRecommendation;\n\n      if (available === false && link) {\n          // Case: State not supported, show message + link\n          finalRecommendation = `${message}\\n\\nExplore plans at: ${link}`;\n      } else {\n          // Case: AI-generated recommendation exists\n          finalRecommendation = recommendation || \"No recommendations available at this time.\";\n      }\n      const formattedRecommendation = <ReactMarkdown remarkPlugins={[remarkGfm]}>{finalRecommendation}</ReactMarkdown>;\n      setSystemContext(response.data.context || []);\n\n        setChatHistory(prev => [\n        ...prev.slice(0, -1),\n        { \n          sender: \"bot\", \n          text: formattedRecommendation,\n          raw:recommendation\n        }\n      ]);\n\n    } catch (error) {\n      setChatHistory(prev => [\n        ...prev.slice(0, -1),\n        { sender: \"bot\", text: \"Failed to load recommendations. Please try again later.\" }\n      ]);\n    } finally {\n      setIsGeneratingRecommendation(false);\n    }\n  };\n\n  const handleSend = async () => {\n    if (!message.trim()) return;\n  \n    const userMessage = message;\n    setLoading(true);\n    \n    // Create updated history before state update\n    const updatedHistory = [\n        ...chatHistory, \n        { sender: \"user\", text: userMessage, raw: userMessage }\n      ];\n    setChatHistory(updatedHistory);\n    setMessage(\"\");\n    setInputFocused(false);\n  \n    try {\n      // Prepare chat context - dynamically adjust based on message length\n      const chatContext = [];\n      let lastRole = null;\n      updatedHistory\n      .slice(-5) // Fixed context window\n      .forEach(msg => {\n        const role = msg.sender === \"user\" ? \"user\" : \"assistant\";\n        if (role !== lastRole) {\n          chatContext.push({\n            role,\n            content: msg.raw || // Use raw text when available\n              (typeof msg.text === 'string' ? msg.text : \n               msg.text?.props?.children?.[0] || '')\n          });\n          lastRole = role;\n        }\n    });\n    if (chatContext.length > 0 && chatContext[chatContext.length-1].role === \"user\") {\n        chatContext.pop();\n      }\n  \n      const payload = {\n        message: userMessage,\n        context: chatContext,\n        userData: {\n          firstName: formData.firstName,\n          lastName: formData.lastName,\n          age: parseInt(formData.age, 10) || null,\n          gender: formData.gender,\n          uses_tobacco: formData.useOfTobaco === 'Daily user',\n          zipcode: formData.zip,\n          state: formData.state.toUpperCase() \n        },\n        sessionId: sessionId\n      };\n  \n      const res = await axios.post(\n        //\"https://insurance-backend-yuoj.onrender.com/chat-with-ai\",\n        \"http://localhost:8000/chat-with-ai\",\n        payload);\n  \n      const botReply = res.data.reply || \"No response received.\";\n      setChatHistory(prev => [\n        ...prev, \n        { \n          sender: \"bot\", \n          text: <ReactMarkdown remarkPlugins={[remarkGfm]}>{botReply}</ReactMarkdown>,\n          raw: botReply // Store raw text for future context\n        }\n      ]);\n      \n      // Update with both user message and bot response\n  \n    } catch (error) {\n      const errorMsg = error.response?.data?.error?.message || \n                      \"Something went wrong. Please try again.\";\n      setChatHistory(prev => [...prev, { sender: \"bot\", text: errorMsg }]);\n      setResponse(errorMsg);\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  const handleKeyDown = (e) => {\n    if (e.key === \"Enter\") {\n      handleSend();\n    }\n  };\n  const handleOptionClick = (option) => {\n    setSelected(option);\n    if (option === \"Recommend\") {\n      handleRecommendationClick();\n    }\n    if (option === \"Compare\"){\n      handleClick()\n    }\n  };\n\n  const shouldShowWelcome =\n    !inputFocused && chatHistory.length === 0 && !message.trim();\n\n  return (\n    <div\n      style={{\n        borderRadius: \"12px\",\n        boxShadow: \"0px 4px 8px rgba(0, 0, 0, 0.1)\",\n        backgroundColor: \"#FAFAFA\",\n        height: \"96vh\",\n        width: \"100%\",\n        backdropFilter: \"blur(32px)\",\n        marginTop: \"20px\",\n        marginBottom: \"20px\",\n        position: \"relative\",\n        overflow: \"hidden\"\n      }}\n    >\n      {/* Logo Header */}\n      <div style={{ display: \"flex\", marginTop: \"30px\", justifyContent: \"center\" }}>\n        <img src={Frame5} style={{ width: '18px', height: '18px', marginTop: \"2.5px\" }} alt=\"Logo\" />\n        <div style={{ fontSize: \"18px\", marginLeft: \"6px\" }}>Insurio</div>\n      </div>\n\n      {/* Chat Area */}\n      <div\n        style={{\n          maxHeight: \"65vh\",\n          overflowY: \"auto\",\n          padding: \"0 24px\",\n          marginTop: \"20px\",\n        }}\n      >\n        <AnimatePresence>\n  {shouldShowWelcome && (\n    <motion.div\n      initial={{ opacity: 0, y: -40 }}\n      animate={{ opacity: 1, y: 0 }}\n      exit={{ opacity: 0, y: -40 }}\n      transition={{ duration: 0.4, ease: \"easeInOut\" }}\n      style={{\n        display: \"flex\",\n        justifyContent: \"center\",\n        alignItems: \"center\",\n        flexDirection: \"column\",\n        marginTop: \"100px\"\n      }}\n    >\n      <img src={Frame5} style={{ width: '22px', height: '22px' }} alt=\"icon\" />\n      <div style={{ color: \"#A0A0A0\", fontSize: \"16px\", marginTop: \"8px\" }}>Welcome to Insurio {formData.firstName}</div>\n      <div style={{ color: \"#000000\", fontSize: \"38px\", marginTop: \"8px\" }}>How can I Help ?</div>\n      {loading && <div style={{ marginTop: \"20px\", color: \"#A0A0A0\" }}>Thinking...</div>}\n    </motion.div>\n  )}\n</AnimatePresence>\n\n        {/* Chat Messages */}\n        {chatHistory.map((msg, index) => (\n            \n          <div\n            key={index}\n            style={{\n              textAlign: msg.sender === \"user\" ? \"right\" : \"left\",\n              margin: \"12px 0\",\n            }}\n          >\n            <span\n              style={{\n                display: \"inline-block\",\n                backgroundColor: msg.sender === \"user\" ? \"#DCF8C6\" : \"#FFFFFF\",\n                color: \"#000000\",\n                padding: \"10px 14px\",\n                borderRadius: \"16px\",\n                maxWidth: \"60%\",\n                fontSize: \"15px\",\n                boxShadow: \"0 2px 4px rgba(0,0,0,0.1)\",\n              }}\n            >\n              {msg.text}\n            </span>\n          </div>\n        ))}\n      </div>\n\n      {/* Input Bar */}\n      <div\n        style={{\n          paddingLeft: \"12px\",\n          paddingRight: \"12px\",\n          backgroundColor: \"#F0F0F0\",\n          borderRadius: \"12px\",\n          position: \"fixed\",\n          bottom: \"6%\",\n          left: \"50%\",\n          transform: \"translateX(-50%)\",\n          width: \"40%\",\n          border: \"1px solid #E0E0E0\",\n        }}\n      >\n        <div style={{ display: \"flex\", marginBottom: 0, marginTop: \"14px\" }}>\n          <input\n            ref={inputRef}\n            type=\"text\"\n            value={message}\n            onChange={(e) => setMessage(e.target.value)}\n            onFocus={() => setInputFocused(true)}\n            onBlur={() => setTimeout(() => setInputFocused(false), 100)}\n            onKeyDown={handleKeyDown}\n            placeholder=\"Ask about any coverage\"\n            style={{\n              flex: 1,\n              borderRadius: \"8px\",\n              backgroundColor: \"#f0f0f0\",\n              marginRight: \"10px\",\n              border: \"none\",\n              fontSize: \"16px\",\n              color: \"#000000\",\n              transition: \"background 0.3s\",\n              outline: \"none\",\n            }}\n          />\n          <div\n            onClick={handleSend}\n            style={{\n              width: \"26px\",\n              height: \"26px\",\n              borderRadius: \"100px\",\n              background: \"#000000\",\n              color: \"#A0A0A0\",\n              border: \"none\",\n              cursor: \"pointer\",\n              display: \"flex\",\n              alignItems: \"center\",\n              justifyContent: \"center\",\n            }}\n          >\n            <ArrowUpIcon size={20} color=\"#FFF\" weight=\"bold\" />\n          </div>\n        </div>\n\n        {/* Clickable Options */}\n        <div style={{ display: \"flex\", gap: \"8px\", justifyContent: \"space-between\" }}>\n          <div style={{ display: \"flex\", gap: \"8px\", justifyContent: \"flex-start\" }}>\n            {options.map((label) => {\n              const isSelected = selected === label;\n              return (\n                <p\n                  key={label}\n                  onClick={() => handleOptionClick(label)}\n                  style={{\n                    border: \"1px solid\",\n                    borderColor: isSelected ? \"#ECB26B3D\" : \"#E0E0E0\",\n                    marginBottom: \"12px\",\n                    marginTop: \"21px\",\n                    textAlign: \"center\",\n                    padding: \"10px 16px\",\n                    color: isSelected ? \"#ECB26B\" : \"#A0A0A0\",\n                    borderRadius: \"10px\",\n                    backgroundColor: isSelected ? \"rgba(236, 178, 107, 0.24)\" : \"#FAFAFA\",\n                    cursor: isGeneratingRecommendation ? 'not-allowed' : 'pointer',\n                    opacity: isGeneratingRecommendation ? 0.6 : 1,\n                    display: \"flex\",\n                    alignItems: \"center\",\n                    cursor: \"pointer\",\n                    transition: \"all 0.3s\",\n                    userSelect: \"none\",\n                    fontSize: \"16px\",\n                  }}\n                  disabled={isGeneratingRecommendation}\n                >\n                  {label}\n                </p>\n              );\n            })}\n          </div>\n          <div style={{ display: \"flex\", gap: \"8px\", justifyContent: \"flex-start\" }}>\n            <div style={{ display: \"flex\", alignItems: \"center\", marginTop: \"21px\", padding: \"10px 0\", marginBottom: \"12px\", cursor: \"pointer\" }} onClick={handleClick}>\n              <Microphone size={20} color=\"#A0A0A0\" weight='fill' />\n            </div>\n            <div style={{ display: \"flex\", alignItems: \"center\", marginTop: \"21px\", padding: \"10px 0\", marginBottom: \"12px\", cursor: \"pointer\"}} onClick={handleClick}>\n              <Paperclip size={20} color=\"#A0A0A0\" />\n            </div>\n          </div>\n        </div>\n      </div>\n      {showPopup && <FeaturePopup onClose={() => setShowPopup(false)} />}\n    </div>\n    \n  );\n};\n\nexport default Middle;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}